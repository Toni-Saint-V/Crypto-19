<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=1440, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>CryptoBot Pro</title>
    <link rel="stylesheet" href="/static/css/dashboard.css" />
  </head>
  <body>
    <div class="dashboard-viewport">
      <!-- TOP BAR: 96px height -->
      <header class="top-bar">
        <div class="top-bar-left">
          <h1 class="logo">CryptoBot Pro</h1>
          <div class="top-bar-info" id="header-info">Bybit • Futures • Balance: $10,000 • Risk: Moderate</div>
        </div>
        <div class="top-bar-center">
          <div class="kpi-cards">
            <div class="kpi-card">
              <div class="kpi-label">Total PnL</div>
              <div class="kpi-value" id="kpi-total-pnl">--</div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">Winrate</div>
              <div class="kpi-value" id="kpi-winrate">--</div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">Active Positions</div>
              <div class="kpi-value" id="kpi-positions">--</div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">Risk Level</div>
              <div class="kpi-value" id="kpi-risk">--</div>
            </div>
          </div>
        </div>
        <div class="top-bar-right">
          <div class="mode-selector">
            <button class="mode-btn" data-mode="live" id="mode-live">LIVE</button>
            <button class="mode-btn" data-mode="test" id="mode-test">TEST</button>
            <button class="mode-btn" data-mode="backtest" id="mode-backtest">BACKTEST</button>
          </div>
          <div class="status-indicator">
            <span class="status-dot" id="status-dot"></span>
            <span class="status-text" id="status-text">Connected</span>
          </div>
        </div>
      </header>

      <!-- TICKER: 40px height -->
      <div class="ticker-bar" id="ticker-bar">
        <div class="ticker-label">Recent trades</div>
        <div class="ticker-content" id="ticker-content">No trades yet</div>
      </div>

      <!-- MAIN AREA: Chart (70%) + Sidebar (30%) -->
      <div class="main-area">
        <!-- LEFT: Chart Panel (70% width) -->
        <div class="chart-panel">
          <div class="chart-header">
            <div class="chart-title-group">
              <span class="chart-pair" id="chart-pair">ETHUSDT</span>
              <span class="chart-exchange">• Bybit</span>
            </div>
            <div class="chart-controls">
              <div class="timeframe-selector">
                <button class="tf-btn" data-tf="1m">1m</button>
                <button class="tf-btn" data-tf="5m">5m</button>
                <button class="tf-btn active" data-tf="15m">15m</button>
                <button class="tf-btn" data-tf="1h">1h</button>
                <button class="tf-btn" data-tf="4h">4h</button>
                <button class="tf-btn" data-tf="1d">1d</button>
              </div>
              <div class="strategy-label" id="strategy-label">Strategy: Trend Following</div>
              <div class="indicator-toggles">
                <label class="indicator-toggle">
                  <input type="checkbox" id="toggle-ema50" />
                  <span>EMA50</span>
                </label>
                <label class="indicator-toggle">
                  <input type="checkbox" id="toggle-ema200" />
                  <span>EMA200</span>
                </label>
                <label class="indicator-toggle">
                  <input type="checkbox" id="toggle-equity" />
                  <span>Equity</span>
                </label>
                <label class="indicator-toggle">
                  <input type="checkbox" id="toggle-rsi" />
                  <span>RSI</span>
                </label>
              </div>
            </div>
          </div>
          <div class="chart-container" id="price-chart-container"></div>
        </div>

        <!-- RIGHT: Sidebar (30% width) -->
        <div class="sidebar">
          <!-- AI Predictor Block (~220px) -->
          <div class="ai-predictor-block">
            <h2 class="sidebar-title">AI Predictor</h2>
            <div class="ai-predictor-content">
              <div class="ai-forecast-item">
                <div class="ai-label">Price Forecast (24h)</div>
                <div class="ai-value" id="ai-forecast-price">--</div>
              </div>
              <div class="ai-signal-item">
                <div class="ai-label">Signal Strength</div>
                <div class="ai-signal-bar">
                  <div class="ai-signal-fill" id="ai-signal-fill"></div>
                </div>
                <div class="ai-signal-value" id="ai-signal-value">--</div>
              </div>
              <div class="ai-sentiment-item">
                <div class="ai-label">Market Sentiment</div>
                <div class="ai-sentiment-line">
                  <div class="ai-sentiment-fill" id="ai-sentiment-fill"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- AI Chat Block (remaining height, scrollable) -->
          <div class="ai-chat-block">
            <h2 class="sidebar-title">AI Chat</h2>
            <div class="ai-chat-messages" id="ai-chat-messages">
              <div class="chat-message system">Welcome to CryptoBot Pro AI Assistant</div>
            </div>
            <div class="ai-chat-input-container">
              <input type="text" class="ai-chat-input" id="ai-chat-input" placeholder="Type a message..." />
              <button class="ai-chat-send" id="ai-chat-send">Send</button>
            </div>
          </div>
        </div>
      </div>

      <!-- BOTTOM BAR: 80px height -->
      <div class="bottom-bar">
        <div class="bottom-controls">
          <select class="control-select" id="bottom-symbol">
            <option value="BTCUSDT">BTCUSDT</option>
            <option value="ETHUSDT" selected>ETHUSDT</option>
            <option value="BNBUSDT">BNBUSDT</option>
          </select>
          <select class="control-select" id="bottom-exchange">
            <option value="bybit" selected>Bybit</option>
            <option value="binance">Binance</option>
          </select>
          <div class="timeframe-segmented">
            <button class="seg-btn" data-tf="1m">1m</button>
            <button class="seg-btn" data-tf="5m">5m</button>
            <button class="seg-btn active" data-tf="15m">15m</button>
            <button class="seg-btn" data-tf="1h">1h</button>
            <button class="seg-btn" data-tf="4h">4h</button>
            <button class="seg-btn" data-tf="1d">1d</button>
          </div>
          <select class="control-select" id="bottom-strategy">
            <option value="trend">Trend Following</option>
            <option value="mean">Mean Reversion</option>
            <option value="momentum">Momentum</option>
          </select>
          <div class="risk-input-group">
            <label>Risk $</label>
            <input type="number" class="control-input" id="bottom-risk" value="100" />
          </div>
          <div class="balance-display" id="bottom-balance">Balance: $10,000</div>
        </div>
      </div>
    </div>

    <!-- Lightweight Charts -->
    <script src="https://unpkg.com/lightweight-charts@4.2.0/dist/lightweight-charts.standalone.production.js"></script>
    <!-- Main Dashboard Module -->
    <script type="module" src="/static/js/dashboard_main.js"></script>
  </body>
</html>
