<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>CryptoBot Pro — Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/static/tokens.css" />
</head>
<body>
  <div class="wrap">
    <header class="top">
      <div class="brand">
        <div class="brand-title">CryptoBot Pro</div>
        <div class="brand-sub">Личный дашборд · Mock candles</div>
      </div>
      <div class="top-filters">
        <div class="field">
          <label class="field-label">Пара</label>
          <select id="symbol-select">
            <option value="BTCUSDT" selected>BTCUSDT</option>
            <option value="ETHUSDT">ETHUSDT</option>
            <option value="SOLUSDT">SOLUSDT</option>
          </select>
        </div>
        <div class="field">
          <label class="field-label">Таймфрейм</label>
          <select id="tf-select">
            <option value="1m" selected>1m</option>
            <option value="5m">5m</option>
            <option value="1h">1h</option>
          </select>
        </div>
      </div>
      <div class="top-right">
        <div class="top-pills">
          <span class="pill" id="mode-pill">
            <span class="pill-label">Локальный режим</span>
          </span>
          <span class="pill" id="net-pill">
            <span class="pill-dot online" id="net-dot"></span>
            <span class="pill-label" id="net-label">Testnet mock</span>
          </span>
        </div>
        <button class="btn btn-ghost" id="btn-ai">
          <span class="btn-dot"></span>
          Спросить AI о рынке
        </button>
      </div>
    </header>

    <section class="kpi-row">
      <div class="kpi-card">
        <div class="kpi-label">Equity</div>
        <div class="kpi-value" id="kpi-equity">10 000 USDT</div>
      </div>
      <div class="kpi-card">
        <div class="kpi-label">P&amp;L (mock)</div>
        <div class="kpi-value kpi-good" id="kpi-pnl">+2.3%</div>
      </div>
      <div class="kpi-card">
        <div class="kpi-label">Открытых сделок</div>
        <div class="kpi-value" id="kpi-open-trades">0</div>
      </div>
      <div class="kpi-card">
        <div class="kpi-label">Стратегия</div>
        <div class="kpi-value" id="kpi-strategy">Three-Candle (demo)</div>
      </div>
    </section>

    <section class="grid">
      <section class="card card-chart">
        <div class="card-header">
          <div>
            <div class="card-title">График цены</div>
            <div class="card-sub" id="chart-subtitle">BTCUSDT · 1m</div>
          </div>
          <span class="tag tag-inline">
            <span class="tag-dot online" id="feed-dot"></span>
            <span id="feed-label">online</span>
          </span>
        </div>

        <div class="chart-toolbar">
          <div class="chart-toolbar-left">
            <button class="chip chip-active" data-tf="1m">1m</button>
            <button class="chip" data-tf="5m">5m</button>
            <button class="chip" data-tf="1h">1h</button>
          </div>
          <button class="btn btn-primary" id="btn-backtest">Запустить бэктест</button>
        </div>

        <div class="chart-shell">
          <div id="chart-root"></div>
        </div>
      </section>

      <aside class="side-column">
        <section class="card card-portfolio">
          <div class="card-header">
            <div>
              <div class="card-title">Сводка портфеля</div>
              <div class="card-sub">Состояние счёта и стратегии</div>
            </div>
          </div>
          <div class="card-body">
            <dl class="stats">
              <div class="stat">
                <dt>Equity</dt>
                <dd id="pf-equity">10 000 USDT</dd>
              </div>
              <div class="stat">
                <dt>P&amp;L (mock)</dt>
                <dd id="pf-pnl" class="good">+2.3%</dd>
              </div>
              <div class="stat">
                <dt>Открытых сделок</dt>
                <dd id="pf-open-trades">0</dd>
              </div>
              <div class="stat">
                <dt>Стратегия</dt>
                <dd id="pf-strategy">Three-Candle (demo)</dd>
              </div>
            </dl>
          </div>
        </section>

        <section class="card card-bt">
          <div class="card-header">
            <div>
              <div class="card-title">Бэктест</div>
              <div class="card-sub">Результаты последнего прогона</div>
            </div>
            <span class="tag">
              <span class="tag-dot idle" id="bt-dot"></span>
              <span id="backtest-status">idle</span>
            </span>
          </div>
          <div class="card-body">
            <p class="muted" id="backtest-meta">
              Нажми «Запустить бэктест», чтобы увидеть доходность и число сделок.
            </p>
            <div class="stats stats-small">
              <div class="stat">
                <dt>Доходность</dt>
                <dd id="bt-return">—</dd>
              </div>
              <div class="stat">
                <dt>Сделок</dt>
                <dd id="bt-trades">—</dd>
              </div>
            </div>
          </div>
        </section>

        <section class="card card-status">
          <div class="card-header">
            <div>
              <div class="card-title">Статус системы</div>
              <div class="card-sub">Сервер, данные и уведомления</div>
            </div>
          </div>
          <div class="card-body">
            <dl class="stats stats-small">
              <div class="stat">
                <dt>Backend</dt>
                <dd id="st-backend">ok</dd>
              </div>
              <div class="stat">
                <dt>WebSocket</dt>
                <dd id="st-ws">online</dd>
              </div>
              <div class="stat">
                <dt>Net</dt>
                <dd id="st-net">Testnet mock</dd>
              </div>
              <div class="stat">
                <dt>Uptime</dt>
                <dd id="st-uptime">stable</dd>
              </div>
            </dl>
          </div>
        </section>
      </aside>
    </section>

    <section class="bottom">
      <div class="tabs">
        <button class="tab active" data-tab="signals">Сигналы</button>
        <button class="tab" data-tab="positions">Позиции</button>
        <button class="tab" data-tab="orders">Ордеры</button>
        <button class="tab" data-tab="bt-log">Бэктест</button>
        <button class="tab" data-tab="logs">Логи</button>
      </div>

      <div class="tab-panels">
        <div class="tab-panel active" id="tab-signals">
          <p class="muted">
            Здесь будет список торговых сигналов и паттернов, обнаруженных ML-движком.
          </p>
        </div>
        <div class="tab-panel" id="tab-positions">
          <p class="muted">
            Здесь появятся открытые позиции с PnL, плечом и уровнями стоп-лосс/тейк-профит.
          </p>
        </div>
        <div class="tab-panel" id="tab-orders">
          <p class="muted">
            Здесь будет история ордеров: заявки, исполнение, отмена.
          </p>
        </div>
        <div class="tab-panel" id="tab-bt-log">
          <p class="muted" id="bt-log">
            После запуска бэктеста сюда можно выводить краткий лог сделок и шагов стратегии.
          </p>
        </div>
        <div class="tab-panel" id="tab-logs">
          <p class="muted">
            Технические логи системы: ошибки API, reconnect WebSocket, сообщения уведомлений.
          </p>
        </div>
      </div>
    </section>
  </div>

  <div id="toast-root" class="toast-root"></div>

  <script src="https://unpkg.com/lightweight-charts@4.2.0/dist/lightweight-charts.standalone.production.js"></script>
  <script src="/static/app.js?v=3"></script>
</body>
</html>
